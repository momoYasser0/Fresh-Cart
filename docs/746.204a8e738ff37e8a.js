"use strict";(self.webpackChunkFinal=self.webpackChunkFinal||[]).push([[746],{5746:(v,g,s)=>{s.r(g),s.d(g,{ProductsComponent:()=>L});var n=s(6814),m=s(1120),l=s(6472),_=s(255),t=s(4769),u=s(380),a=s(916),p=s(9366),f=s(2425);function C(i,d){if(1&i&&t._UZ(0,"i",18),2&i){const e=d.$implicit,r=t.oxw().$implicit;t.ekj("rating-color",r.ratingsAverage>=e)}}function P(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.addFav(o._id))}),t.qZA()}}function x(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.removeFav(o._id))}),t.qZA()}}const T=function(i){return["/details",i]},E=function(){return[1,2,3,4,5]};function A(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"header",7),t._UZ(3,"img",8),t.TgZ(4,"h3",9),t._uU(5),t.ALo(6,"cuttext"),t.qZA(),t.TgZ(7,"h4",10),t._uU(8),t.qZA(),t.TgZ(9,"div",11)(10,"span"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"div"),t.YNc(14,C,1,2,"i",12),t.TgZ(15,"span",13),t._uU(16),t.qZA()()()(),t.YNc(17,P,1,0,"i",14),t.YNc(18,x,1,0,"i",15),t.TgZ(19,"footer")(20,"button",16,17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.MAs(21),O=t.oxw(2);return t.KtG(O.addToCart(c._id,h))}),t._uU(22,"Add to Cart +"),t.qZA()()()()}if(2&i){const e=d.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(18,T,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title)("title",e.title),t.xp6(2),t.Oqu(t.Dn7(6,11,e.title,0,2)),t.xp6(3),t.Oqu(e.category.name),t.xp6(3),t.hij("",t.xi3(12,15,e.price,"EGP ")," "),t.xp6(3),t.Q6J("ngForOf",t.DdM(20,E)),t.xp6(2),t.Oqu(e.ratingsAverage),t.xp6(1),t.Q6J("ngIf",!r.wishListData.includes(e._id)),t.xp6(1),t.Q6J("ngIf",r.wishListData.includes(e._id))}}const D=function(i,d,e){return{id:"Products",itemsPerPage:i,currentPage:d,totalItems:e}};function M(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"section",1)(1,"h2"),t._uU(2,"All Products"),t.qZA(),t.YNc(3,A,23,21,"div",2),t.ALo(4,"paginate"),t.TgZ(5,"div",3)(6,"pagination-controls",4),t.NdJ("pageChange",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.pageChanged(o))})("pageBoundsCorrection",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.pageChanged(o))}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.xi3(4,5,e.products,t.kEZ(8,D,e.pageItems,e.currentPage,e.totalItems))),t.xp6(3),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}let L=(()=>{class i{constructor(e,r,o,c,h){this._ProductsService=e,this._WishlistService=r,this._Renderer2=o,this._CartService=c,this._ToastrService=h,this.products=[],this.wishListData=[],this.pageItems=0,this.currentPage=1,this.totalItems=0}ngOnInit(){this._ProductsService.getAllProducts().subscribe({next:e=>{this.products=e.data,this.pageItems=e.metadata.limit,this.currentPage=e.metadata.currentPage,this.totalItems=e.results}}),this._WishlistService.getWishList().subscribe({next:e=>{if("success"==e.status){const r=e.data.map(o=>o._id);this.wishListData=r}},error:e=>{"fail"==e.statusMsg&&this._ToastrService.error(e.message)}})}addToCart(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addProductToCart(e).subscribe({next:o=>{"success"==o.status&&(this._Renderer2.removeAttribute(r,"disabled"),this._ToastrService.success("Product added successfully to your cart"),this._CartService.cartNumber.next(o.numOfCartItems))},error:o=>{this._Renderer2.removeAttribute(r,"disabled")}})}pageChanged(e){this._ProductsService.getAllProducts(e).subscribe({next:r=>{this.products=r.data,this.pageItems=r.metadata.limit,this.currentPage=r.metadata.currentPage,this.totalItems=r.results,window.scrollTo(0,0)}})}addFav(e){this._WishlistService.addToWishList(e).subscribe({next:r=>{"success"==r.status&&(this._ToastrService.success(r.message),this._WishlistService.FavNumber.next(r.data.length),this.wishListData=r.data)},error:r=>{(r.error.statusMsg="fail")&&this._ToastrService.error(r.error.message)}})}removeFav(e){this._WishlistService.removeItem(e).subscribe({next:r=>{"success"==r.status&&(this._ToastrService.info(r.message),this._WishlistService.FavNumber.next(r.data.length),this.wishListData=r.data)},error:r=>{(r.error.statusMsg="fail")&&this._ToastrService.error(r.error.message)}})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(u.s),t.Y36(a.M),t.Y36(t.Qsj),t.Y36(p.N),t.Y36(f._W))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","row g-4 py-3",4,"ngIf"],[1,"row","g-4","py-3"],["class"," col-sm-6  col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"text-center","position-sticky"],["id","Products","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product"],["role","button",1,"p-2",3,"routerLink"],[1,"mb-2","w-100",3,"src","alt","title"],[1,"h6"],[1,"small","text-main"],[1,"d-flex","justify-content-between"],["class","fas fa-star  fa-sm",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],["class","fa-regular fa-heart fa-2x text-main heart","role","button","title","Add To Your Favourite",3,"click",4,"ngIf"],["class","fas fa-heart fa-2x text-main heart","role","button","title","Remove From Favourite",3,"click",4,"ngIf"],[1,"main-btn","w-75","mx-auto","d-block","mb-1",3,"click"],["btnAdd",""],[1,"fas","fa-star","fa-sm"],["role","button","title","Add To Your Favourite",1,"fa-regular","fa-heart","fa-2x","text-main","heart",3,"click"],["role","button","title","Remove From Favourite",1,"fas","fa-heart","fa-2x","text-main","heart",3,"click"]],template:function(r,o){1&r&&t.YNc(0,M,7,12,"section",0),2&r&&t.Q6J("ngIf",o.products.length)},dependencies:[n.ez,n.sg,n.O5,n.H9,m.rH,_.r,l.JX,l._s,l.LS]})}return i})()},9366:(v,g,s)=>{s.d(g,{N:()=>_});var n=s(5619),m=s(4769),l=s(9862);let _=(()=>{class t{constructor(a){this._HttpClient=a,this.cartNumber=new n.X(0)}addProductToCart(a){return this._HttpClient.post("cart",{productId:a})}getProductToCart(){return this._HttpClient.get("cart")}removeItem(a){return this._HttpClient.delete(`cart/${a}`)}updateCount(a,p){return this._HttpClient.put(`cart/${a}`,{count:p})}removeAllItems(){return this._HttpClient.delete("cart")}static#t=this.\u0275fac=function(p){return new(p||t)(m.LFG(l.eN))};static#e=this.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},380:(v,g,s)=>{s.d(g,{s:()=>l});var n=s(4769),m=s(9862);let l=(()=>{class _{constructor(u){this._HttpClient=u}getAllProducts(u=1){return this._HttpClient.get(`products?page=${u}&limit=24`)}getProductDetails(u){return this._HttpClient.get(`products/${u}`)}static#t=this.\u0275fac=function(a){return new(a||_)(n.LFG(m.eN))};static#e=this.\u0275prov=n.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);