"use strict";(self.webpackChunkFinal=self.webpackChunkFinal||[]).push([[339],{6339:(p,d,n)=>{n.r(d),n.d(d,{WishlistComponent:()=>A});var a=n(6814),h=n(1120),m=n(255),t=n(4769),_=n(916),f=n(2425),c=n(9366);function u(e,l){if(1&e&&t._UZ(0,"i",18),2&e){const i=l.$implicit,s=t.oxw(2).$implicit;t.ekj("rating-color",s.ratingsAverage>=i)}}const v=function(e){return["/details",e]},g=function(){return[1,2,3,4,5]};function C(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",7)(1,"header",8),t._UZ(2,"img",9),t.TgZ(3,"h3",10),t._uU(4),t.ALo(5,"cuttext"),t.qZA(),t.TgZ(6,"h4",11),t._uU(7),t.qZA(),t.TgZ(8,"div",12)(9,"span"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"div"),t.YNc(13,u,1,2,"i",13),t.TgZ(14,"span",14),t._uU(15),t.qZA()()()(),t.TgZ(16,"i",15),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.removeFav(r._id))}),t.qZA(),t.TgZ(17,"footer")(18,"button",16,17),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(19),o=t.oxw().$implicit,O=t.oxw(2);return t.KtG(O.addToCart(o._id,r))}),t._uU(20,"Add to Cart +"),t.qZA()()()}if(2&e){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(16,v,i._id)),t.xp6(1),t.Q6J("src",i.imageCover,t.LSH)("alt",i.title)("title",i.title),t.xp6(2),t.Oqu(t.Dn7(5,9,i.title,0,2)),t.xp6(3),t.Oqu(i.category.name),t.xp6(3),t.hij("",t.xi3(11,13,i.price,"EGP ")," "),t.xp6(3),t.Q6J("ngForOf",t.DdM(18,g)),t.xp6(2),t.Oqu(i.ratingsAverage)}}function x(e,l){if(1&e&&(t.TgZ(0,"div",5),t.YNc(1,C,21,19,"div",6),t.qZA()),2&e){const i=l.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.wishList.includes(i._id))}}function T(e,l){if(1&e&&(t.TgZ(0,"section",2)(1,"div",3),t.YNc(2,x,2,1,"div",4),t.qZA()()),2&e){const i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.wishList)}}function E(e,l){1&e&&(t.TgZ(0,"div",19)(1,"h2",20),t._uU(2,"Your Wish List is Empty"),t.qZA()())}let A=(()=>{class e{constructor(i,s,r,o){this._WishlistService=i,this._ToastrService=s,this._Renderer2=r,this._CartService=o,this.wishList=[],this.wishListID=[]}ngOnInit(){this._WishlistService.getWishList().subscribe({next:i=>{if("success"==i.status){this.wishList=i.data;const s=i.data.map(r=>r._id);this.wishListID=s}},error:i=>{"fail"==i.statusMsg&&this._ToastrService.error(i.message)}})}addToCart(i,s){this._Renderer2.setAttribute(s,"disabled","true"),this._CartService.addProductToCart(i).subscribe({next:r=>{"success"==r.status&&(this._Renderer2.removeAttribute(s,"disabled"),this._ToastrService.success("Product added successfully to your cart"),this._CartService.cartNumber.next(r.numOfCartItems))},error:r=>{this._Renderer2.removeAttribute(s,"disabled")}})}removeFav(i){this._WishlistService.removeItem(i).subscribe({next:s=>{if("success"==s.status){this._ToastrService.success(s.message),this._WishlistService.FavNumber.next(s.data.length),this.wishListID=s.data;const r=this.wishList.filter(o=>this.wishListID.includes(o._id));this.wishList=r}},error:s=>{(s.error.statusMsg="fail")&&this._ToastrService.error(s.error.message)}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(_.M),t.Y36(f._W),t.Y36(t.Qsj),t.Y36(c.N))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-4",4,"ngIf","ngIfElse"],["noList",""],[1,"my-4"],[1,"row","g-3","justify-content-center"],["class"," col-sm-6  col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],["class","product",4,"ngIf"],[1,"product"],["role","button",1,"p-2",3,"routerLink"],[1,"mb-2","w-100",3,"src","alt","title"],[1,"h6"],[1,"small","text-main"],[1,"d-flex","justify-content-between"],["class","fas fa-star  fa-sm",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],["role","button","title","Remove From favourite",1,"fas","fa-heart","fa-2x","text-main","heart",3,"click"],[1,"main-btn","w-75","mx-auto","d-block","mb-1",3,"click"],["btnAdd",""],[1,"fas","fa-star","fa-sm"],[1,"d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"text-center","fw-bold"]],template:function(s,r){if(1&s&&(t.YNc(0,T,3,1,"section",0),t.YNc(1,E,3,0,"ng-template",null,1,t.W1O)),2&s){const o=t.MAs(2);t.Q6J("ngIf",r.wishList.length)("ngIfElse",o)}},dependencies:[a.ez,a.sg,a.O5,a.H9,h.rH,m.r]})}return e})()},9366:(p,d,n)=>{n.d(d,{N:()=>t});var a=n(5619),h=n(4769),m=n(9862);let t=(()=>{class _{constructor(c){this._HttpClient=c,this.cartNumber=new a.X(0)}addProductToCart(c){return this._HttpClient.post("cart",{productId:c})}getProductToCart(){return this._HttpClient.get("cart")}removeItem(c){return this._HttpClient.delete(`cart/${c}`)}updateCount(c,u){return this._HttpClient.put(`cart/${c}`,{count:u})}removeAllItems(){return this._HttpClient.delete("cart")}static#t=this.\u0275fac=function(u){return new(u||_)(h.LFG(m.eN))};static#i=this.\u0275prov=h.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);