"use strict";(self.webpackChunkFinal=self.webpackChunkFinal||[]).push([[976],{6976:(U,a,_)=>{_.r(a),_.d(a,{ForgetPassComponent:()=>v});var l=_(6814),n=_(95),e=_(4769),c=_(6628),m=_(2425),u=_(1120);function p(o,i){1&o&&(e.TgZ(0,"p",9),e._UZ(1,"i",10),e._uU(2,"Email is required "),e.qZA())}function g(o,i){1&o&&(e.TgZ(0,"p",9),e._UZ(1,"i",10),e._uU(2,"Please enter valid email"),e.qZA())}function f(o,i){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,p,3,0,"p",8),e.YNc(2,g,3,0,"p",8),e.qZA()),2&o){const t=e.oxw(2);let s,r;e.xp6(1),e.Q6J("ngIf",null==(s=t.forgetForm.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.forgetForm.get("email"))?null:r.getError("email"))}}function d(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.forgetPassword())}),e.TgZ(2,"label",3),e._uU(3,"Email :"),e.qZA(),e._UZ(4,"input",4),e.YNc(5,f,3,2,"div",5),e.TgZ(6,"button",6),e._uU(7,"Submit Email"),e.qZA()()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.forgetForm),e.xp6(4),e.Q6J("ngIf",null==(s=t.forgetForm.get("email"))?null:s.touched)}}function h(o,i){1&o&&(e.TgZ(0,"p",9),e._UZ(1,"i",10),e._uU(2,"Input is required "),e.qZA())}function x(o,i){1&o&&(e.TgZ(0,"p",9),e._UZ(1,"i",10),e._uU(2,"Incorrect Pattern "),e.qZA())}function w(o,i){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,h,3,0,"p",8),e.YNc(2,x,3,0,"p",8),e.qZA()),2&o){const t=e.oxw(2);let s,r;e.xp6(1),e.Q6J("ngIf",null==(s=t.resetForm.get("resetCode"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.resetForm.get("resetCode"))?null:r.getError("pattern"))}}function P(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.resetCode())}),e.TgZ(2,"label",11),e._uU(3,"Reset Code :"),e.qZA(),e._UZ(4,"input",12),e.YNc(5,w,3,2,"div",5),e.TgZ(6,"button",6),e._uU(7,"Submit Reset Code"),e.qZA()()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.resetForm),e.xp6(4),e.Q6J("ngIf",null==(s=t.resetForm.get("resetCode"))?null:s.touched)}}function Z(o,i){1&o&&(e.TgZ(0,"p",9),e._UZ(1,"i",10),e._uU(2,"Password is required "),e.qZA())}function T(o,i){1&o&&(e.TgZ(0,"p",9),e._UZ(1,"i",10),e._uU(2,"Password must be at least Minimum eight characters"),e._UZ(3,"br"),e._uU(4,"\u2022 at least One uppercase letter. "),e._UZ(5,"br"),e._uU(6,"\u2022 One lowercase letter. "),e._UZ(7,"br"),e._uU(8,"\u2022 One number and one special character."),e.qZA())}function F(o,i){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,Z,3,0,"p",8),e.YNc(2,T,9,0,"p",8),e.qZA()),2&o){const t=e.oxw(2);let s,r;e.xp6(1),e.Q6J("ngIf",null==(s=t.newPassForm.get("password"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.newPassForm.get("password"))?null:r.getError("pattern"))}}function C(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",1)(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.resetPassword())}),e.TgZ(2,"label",13),e._uU(3,"New Password :"),e.qZA(),e._UZ(4,"input",14),e.YNc(5,F,3,2,"div",5),e.TgZ(6,"button",6),e._uU(7,"Submit New Password"),e.qZA()()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.newPassForm),e.xp6(4),e.Q6J("ngIf",null==(s=t.newPassForm.get("password"))?null:s.touched)}}let v=(()=>{class o{constructor(t,s,r){this._AuthService=t,this._ToastrService=s,this._Router=r,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.forgetForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.resetForm=new n.cw({resetCode:new n.NI("",[n.kI.required,n.kI.pattern(/^[0-9A-Za-z]{5,}$/)])}),this.newPassForm=new n.cw({newPassword:new n.NI("",[n.kI.required,n.kI.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)])})}forgetPassword(){let t=this.forgetForm.value;this.email=t.email,this._AuthService.forgetPassword(t).subscribe({next:s=>{console.log(s),"success"==s.statusMsg&&(this.step1=!1,this.step2=!0,this._ToastrService.success(s.message))},error:s=>{(s.error.statusMsg="fail")&&this._ToastrService.error("There is no user registered with this email address")}})}resetCode(){this._AuthService.resetCode(this.resetForm.value).subscribe({next:t=>{"Success"==t.status&&(this.step2=!1,this.step3=!0,this._ToastrService.success("Reset code is correct"))},error:t=>{"fail"==t.error.statusMsg&&this._ToastrService.error(t.error.message)}})}resetPassword(){let t=this.newPassForm.value;t.email=this.email,this._AuthService.newPassword(t).subscribe({next:s=>{console.log(s),null!=localStorage.getItem("token")?this._Router.navigate(["/home"]):this._Router.navigate(["/login"])},error:s=>{console.log(s)}})}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(c.e),e.Y36(m._W),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-forget-pass"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","mx-auto w-50 bg-main-light shadow p-3 rounded-2 my-5",4,"ngIf"],[1,"mx-auto","w-50","bg-main-light","shadow","p-3","rounded-2","my-5"],[3,"formGroup","ngSubmit"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["class","a-alert",4,"ngIf"],[1,"main-btn","w-100","mt-3"],[1,"a-alert"],["class","text-danger mb-0",4,"ngIf"],[1,"text-danger","mb-0"],[1,"fa-regular","fa-circle-xmark","me-1"],["for","resetcode"],["type","text","id","resetcode","formControlName","resetCode",1,"form-control"],["for","resetpw"],["type","password","id","resetpw","formControlName","newPassword",1,"form-control"]],template:function(s,r){1&s&&(e.YNc(0,d,8,2,"section",0),e.YNc(1,P,8,2,"section",0),e.YNc(2,C,8,2,"section",0)),2&s&&(e.Q6J("ngIf",r.step1),e.xp6(1),e.Q6J("ngIf",r.step2),e.xp6(1),e.Q6J("ngIf",r.step3))},dependencies:[l.ez,l.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return o})()}}]);